è¿™ç¯‡è®ºæ–‡ã€Š**Determine-Then-Ensemble: Necessity of Top-k Union for Large Language Model Ensembling**ã€‹çš„æ ¸å¿ƒç›®æ ‡æ˜¯æå‡**å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰é›†æˆï¼ˆensemblingï¼‰æ–¹æ³•çš„æ€§èƒ½ä¸æ•ˆç‡**ã€‚ä½œè€…è¯†åˆ«äº†ç°æœ‰æ–¹æ³•çš„ä¸¤å¤§é—®é¢˜å¹¶æå‡ºäº†å…¨æ–°çš„**UNITEæ–¹æ³•**ï¼Œé€šè¿‡**åªèåˆå„æ¨¡å‹ Top-k token çš„æ¦‚ç‡åˆ†å¸ƒ**æ¥è§„é¿å…¨è¯è¡¨å¯¹é½å¸¦æ¥çš„è®¡ç®—è´Ÿæ‹…ã€‚

---

## ğŸ§  ä¸€ã€ä¸»è¦æ–¹æ³•æ€»ç»“

### 1.1 æ¨¡å‹é€‰æ‹©ç­–ç•¥ï¼ˆDetermine-Then-Ensembleï¼‰

ä½œè€…é¦–å…ˆå¼ºè°ƒï¼Œ**ä¸æ˜¯æ‰€æœ‰æ¨¡å‹éƒ½é€‚åˆè¢«é›†æˆ**ã€‚ä»–ä»¬æå‡ºä¸€ä¸ªä¸¤æ­¥ç­–ç•¥ï¼š

1. **é€‰æ‹©ä¸»æ¨¡å‹**ï¼šä»å€™é€‰æ¨¡å‹æ± ä¸­é€‰æ‹©ç›®æ ‡ä»»åŠ¡è¡¨ç°æœ€å¥½çš„æ¨¡å‹ã€‚
    
2. **é€æ­¥åŠ å…¥å…¼å®¹æ¨¡å‹**ï¼šé€‰æ‹©æ€§èƒ½å·®è·å°äº 10%ï¼Œä¸”**å“åº”é£æ ¼ï¼ˆresponse styleï¼‰ä¸€è‡´**çš„æ¨¡å‹ï¼ˆæ¯”å¦‚æ–‡æœ¬é•¿åº¦å·®è·ä¸å¤§ï¼‰ï¼Œä»¥ç¡®ä¿å…¼å®¹æ€§ã€‚
    

â¡ï¸ **Vocabulary size ä¸å†ä½œä¸ºåˆ¤æ–­æ¡ä»¶**ï¼Œå› ä¸ºä½œè€…å‘ç°è¯è¡¨å¤§å°å¯¹æœ€ç»ˆæ€§èƒ½å½±å“éå¸¸å°ã€‚

---

### 1.2 UNITE æ–¹æ³•ï¼šUnion Top-k Ensembling

ä¼ ç»Ÿæ¦‚ç‡çº§é›†æˆæ–¹æ³•ï¼ˆå¦‚ DEEPENã€GACï¼‰éœ€å¯¹é½æ•´ä¸ªè¯è¡¨ï¼ˆæ•°ä¸‡ä¸ªtokenï¼‰ï¼Œè®¡ç®—å¼€é”€å·¨å¤§ã€‚è€Œ UNITE æå‡ºäº†ä¸€ç§**åªå¯¹é½å„æ¨¡å‹ Top-k token çš„æ–¹æ³•**ï¼Œç§°ä¸ºï¼š

> **UNIon Top-k Ensembling (UNITE)**

#### æ ¸å¿ƒæµç¨‹å¦‚ä¸‹ï¼š

1. **å„æ¨¡å‹ç‹¬ç«‹è§£ç å½“å‰è¾“å…¥ï¼Œè¾“å‡º Top-k token æ¦‚ç‡ï¼ˆTopKiï¼‰**ï¼›
    
2. **æ„å»ºè”åˆé›†åˆ Vu**ï¼šåˆå¹¶å„æ¨¡å‹ Top-k tokenï¼ˆå»é‡ï¼‰ï¼›
    
3. å¯¹äº Vu ä¸­çš„æ¯ä¸ª tokenï¼ŒæŒ‰ä»¥ä¸‹è§„åˆ™å¤„ç†å…¶æ¦‚ç‡ï¼š
    
    - è‹¥è¯¥ token åŒæ—¶åœ¨æ¨¡å‹ TopKi ä¸­å‡ºç°ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›
        
    - è‹¥ token å±äºæ¨¡å‹è¯è¡¨ä½†ä¸åœ¨ TopKi ä¸­ï¼Œåˆ™å–å…¶åŸå§‹æ¦‚ç‡åŠ å…¥ï¼›
        
    - è‹¥ token ä¸åœ¨è¯¥æ¨¡å‹è¯è¡¨ä¸­ï¼Œåˆ™ç”¨ tokenizer æ‹†åˆ†ä¸ºè‹¥å¹²å­ tokenï¼Œä¿ç•™ç¬¬ä¸€ä¸ªå­ token çš„æ¦‚ç‡ï¼›
        
4. æ‰€æœ‰æ¨¡å‹çš„ TopKÌ‚i æ¦‚ç‡å½’ä¸€åŒ–ï¼Œå–å¹³å‡ï¼›
    
5. **æœ€ç»ˆé¢„æµ‹ä½¿ç”¨å¹³å‡æ¦‚ç‡æœ€å¤§å€¼ token**ã€‚
    

ğŸ“Œ **ä¼˜åŠ¿**ï¼š

- æå¤§å‡å°‘è®¡ç®—é‡ï¼ˆæ¯æ­¥ä»…æ“ä½œçº¦ 14 ä¸ª tokenï¼‰ï¼›
    
- é¿å…å›  tokenizer å·®å¼‚è€Œå¿½ç•¥æ½œåœ¨å¥½ tokenï¼›
    
- èƒ½å®¹å¿è¯è¡¨å·®å¼‚ï¼Œæ”¯æŒå¼‚æ„æ¨¡å‹ï¼ˆåŒ…æ‹¬ MoE å’Œ dense æ··åˆæ¨¡å‹ï¼‰ï¼›
    
- æ— éœ€è¾…åŠ©æ˜ å°„çŸ©é˜µæˆ–è®­ç»ƒã€‚
    

---

## ğŸ§ª äºŒã€å®éªŒä¸å¯¹æ¯”ç»“æœ

å®éªŒæ¶µç›– 6 ä¸ª benchmarkï¼ŒåŒ…æ‹¬ reasoningã€QA å’ŒçŸ¥è¯†é—®ç­”ç­‰ä»»åŠ¡ã€‚

|æ–¹æ³•|å¹³å‡æå‡|è¯´æ˜|
|---|---|---|
|**UNITE**|â†‘ æœ€å¤š +4.21%|åœ¨å¤šä¸ªä»»åŠ¡ä¸­è¶…è¶Š DEEPENã€GAC å’Œ LLM-BLENDER|
|**DEEPEN**|OOM/ä¸‹é™|è¯è¡¨è¿‡å¤§æ—¶æ˜“å´©æºƒ|
|**GAC**|è¾ƒå·®æ€§èƒ½|è®¡ç®—å¤æ‚ï¼Œæ•ˆæœä¸€èˆ¬|
|**LLM-BLENDER**|å¯¹ä¸ªåˆ«ä»»åŠ¡æœ‰æ•ˆ|ä½†å¯¹ response é£æ ¼å·®å¼‚æ•æ„Ÿ|

æ­¤å¤–ï¼Œä½œè€…ä¹Ÿåœ¨ LLaMA3 + Qwen2 ç­‰å¤šæ¨¡å‹ç»„åˆä¸Šæµ‹è¯•äº† **UNITE çš„é€šç”¨æ€§å’Œå¤šè¯­è¨€æ”¯æŒèƒ½åŠ›ï¼ˆå¦‚ CMMLUï¼‰**ï¼Œç»“æœä¾ç„¶å¼ºåŠ²ã€‚

---

## ğŸ” ä¸‰ã€å¯¹ä½ æåˆ°çš„ UniTe å’Œ PackLLM çš„å…³ç³»è¯´æ˜

ä½œè€…åœ¨æ­£æ–‡ä¸­æŒ‡å‡ºï¼š

> â€œFurthermore, there are several alternative methods that do not prioritize dictionary alignment as their core objective: **UniTe [Yao et al., 2024]** and **PackLLM [Mavromatis et al., 2024]** directly adopt existing alignment techniques ...â€

å³ï¼š

- **UNITE æ–¹æ³•è™½ç„¶é¿å¼€äº†å…¨è¯è¡¨å¯¹é½ï¼Œä½†ä»é€šè¿‡ token æ˜ å°„ç­–ç•¥å®ç°è½»é‡çº§å¯¹é½**ï¼›
    
- ç›¸æ¯”ä¹‹ä¸‹ï¼ŒPackLLM ç­‰æ–¹æ³•å¯èƒ½ä»ç„¶ä¾èµ–ç°æœ‰å…¨å±€å¯¹é½æœºåˆ¶ï¼ˆå¦‚æ˜ å°„çŸ©é˜µï¼‰ï¼Œä½†å¹¶æœªç‰¹åˆ«ä¼˜åŒ– token ç²’åº¦èåˆç­–ç•¥ã€‚
    

UNITE åœ¨**èåˆç²’åº¦ï¼ˆtop-k token å±‚é¢ï¼‰**å’Œ**èåˆé€»è¾‘ï¼ˆè·¨ tokenizer token é‡ç»„ï¼‰**ä¸Šæ›´å…·åˆ›æ–°æ€§ã€‚

---

## âœ… æ€»ç»“ï¼šæ ¸å¿ƒè´¡çŒ®

1. **æå‡ºäº†æ¨¡å‹é€‰æ‹©æ ‡å‡†**ï¼ˆæ€§èƒ½å·®è· < 10%ã€é£æ ¼ä¸€è‡´ï¼‰ï¼Œæ­ç¤ºäº†è¯è¡¨å¤§å°å½±å“å¾®å¼±ï¼›
    
2. **è®¾è®¡äº† UNITE æ–¹æ³•**ï¼Œçªç ´è¯è¡¨å¯¹é½ç“¶é¢ˆï¼Œä»…ä½¿ç”¨ top-k token å®ç°é«˜æ•ˆèåˆï¼›
    
3. **å®éªŒè¦†ç›–å¹¿æ³›ä»»åŠ¡å’Œæ¨¡å‹ç»„åˆ**ï¼ŒéªŒè¯äº† UNITE çš„æ€§èƒ½æå‡ã€é€šç”¨æ€§ä¸æ•ˆç‡ã€‚
    

å¦‚æœä½ è¿˜æƒ³å¯¹ç…§ PackLLM æ–¹æ³•è¿›ä¸€æ­¥æ¯”è¾ƒæˆ–æ‰¾åŸæ–‡æˆ‘ä¹Ÿå¯ä»¥å¸®ä½ æ‹‰æ¥ä¸€èµ·å¯¹æ¯”ã€‚éœ€è¦æˆ‘ç»§ç»­å—ï¼Ÿ